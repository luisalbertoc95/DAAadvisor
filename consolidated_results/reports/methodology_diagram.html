<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DAAadvisor Methodology Framework</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            text-align: center;
            padding: 30px;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: bold;
        }
        
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .workflow {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        .step {
            display: flex;
            align-items: center;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border-left: 6px solid #3498db;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .step:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .step-number {
            font-size: 3em;
            font-weight: bold;
            color: #3498db;
            margin-right: 30px;
            min-width: 80px;
            text-align: center;
        }
        
        .step-content {
            flex: 1;
        }
        
        .step-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .step-description {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .substeps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .substep {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            transition: border-color 0.3s ease;
        }
        
        .substep:hover {
            border-color: #3498db;
        }
        
        .substep-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .substep-desc {
            font-size: 0.9em;
            color: #666;
        }
        
        .methods-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .method-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .method-card:hover {
            transform: scale(1.05);
        }
        
        .method-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .method-type {
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            margin-bottom: 10px;
            display: inline-block;
        }
        
        .method-desc {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .arrow {
            text-align: center;
            font-size: 2em;
            color: #3498db;
            margin: 20px 0;
        }
        
        .info-theory-section {
            background: linear-gradient(135deg, #ff7b7b 0%, #667eea 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }
        
        .info-theory-title {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .formula-box {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            text-align: center;
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .consensus-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .consensus-box {
            background: #3498db;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            text-align: center;
            flex: 1;
            margin: 0 10px;
            font-weight: bold;
        }
        
        .flow-arrow {
            font-size: 1.5em;
            color: #3498db;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .feature-box {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .feature-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .legend {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .legend-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .legend-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            padding: 8px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .stats-box {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .stat-item {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß¨ DAAadvisor Methodology Framework</h1>
            <p>Comprehensive Differential Abundance Analysis with Information-Theoretic Method Selection</p>
        </div>
        
        <div class="content">
            <!-- Overview Statistics -->
            <div class="stats-box">
                <h2 style="margin: 0 0 20px 0;">üéØ Framework Overview</h2>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number">6</div>
                        <div class="stat-label">Statistical Methods</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">3</div>
                        <div class="stat-label">Data Types</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">100%</div>
                        <div class="stat-label">R Integration</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">‚àû</div>
                        <div class="stat-label">Scalability</div>
                    </div>
                </div>
            </div>
            
            <!-- Main Workflow -->
            <div class="workflow">
                <!-- Step 1: Data Assessment -->
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">üìä Data Assessment & Profiling</div>
                        <div class="step-description">
                            Comprehensive characterization of input microbiome data to inform optimal method selection.
                        </div>
                        <div class="substeps">
                            <div class="substep">
                                <div class="substep-title">üîç Sparsity Analysis</div>
                                <div class="substep-desc">Zero-inflation quantification: (zeros / total_elements) √ó 100%</div>
                            </div>
                            <div class="substep">
                                <div class="substep-title">üìà Count Distribution</div>
                                <div class="substep-desc">Mean, variance, dynamic range assessment</div>
                            </div>
                            <div class="substep">
                                <div class="substep-title">üß¨ Data Type Detection</div>
                                <div class="substep-desc">ASV/16S, Gene/Functional, Viral classification</div>
                            </div>
                            <div class="substep">
                                <div class="substep-title">‚öñÔ∏è Compositional Bias</div>
                                <div class="substep-desc">Library size variation and normalization needs</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="arrow">‚¨áÔ∏è</div>
                
                <!-- Step 2: Information Theory Framework -->
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">üß† Information-Theoretic Method Selection</div>
                        <div class="step-description">
                            Maximum entropy principle guides optimal statistical method selection based on data characteristics.
                        </div>
                        
                        <div class="info-theory-section">
                            <div class="info-theory-title">üìê Mathematical Framework</div>
                            
                            <div class="formula-box">
                                <strong>Jensen-Shannon Divergence:</strong><br>
                                JS(P,Q) = ¬Ω[KL(P||M) + KL(Q||M)] where M = ¬Ω(P+Q)
                            </div>
                            
                            <div class="formula-box">
                                <strong>Maximum Entropy Selector:</strong><br>
                                Method* = argmax H(X|Œ∏) subject to data constraints
                            </div>
                            
                            <div class="formula-box">
                                <strong>Compositional Log-Ratio:</strong><br>
                                CLR(x) = log(x/g(x)) where g(x) = geometric mean
                            </div>
                        </div>
                        
                        <div class="substeps">
                            <div class="substep">
                                <div class="substep-title">üéØ Entropy Calculation</div>
                                <div class="substep-desc">Information content quantification for each feature</div>
                            </div>
                            <div class="substep">
                                <div class="substep-title">üîÑ Divergence Metrics</div>
                                <div class="substep-desc">Between-group difference measurement</div>
                            </div>
                            <div class="substep">
                                <div class="substep-title">‚ö° Confidence Scoring</div>
                                <div class="substep-desc">Method selection confidence quantification</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="arrow">‚¨áÔ∏è</div>
                
                <!-- Step 3: Method Integration -->
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-title">üî¨ Multi-Method Statistical Analysis</div>
                        <div class="step-description">
                            Integrated statistical analysis using both Python and R methods for comprehensive differential abundance testing.
                        </div>
                        
                        <div class="methods-grid">
                            <div class="method-card">
                                <div class="method-name">Wilcoxon</div>
                                <div class="method-type">Non-parametric</div>
                                <div class="method-desc">Rank-based testing, robust to outliers</div>
                            </div>
                            <div class="method-card">
                                <div class="method-name">ALDEx2</div>
                                <div class="method-type">Compositional</div>
                                <div class="method-desc">CLR transformation with Monte Carlo sampling</div>
                            </div>
                            <div class="method-card">
                                <div class="method-name">ANCOM-BC</div>
                                <div class="method-type">Bias Correction</div>
                                <div class="method-desc">Compositional bias correction</div>
                            </div>
                            <div class="method-card">
                                <div class="method-name">DESeq2</div>
                                <div class="method-type">Parametric</div>
                                <div class="method-desc">Negative binomial modeling</div>
                            </div>
                            <div class="method-card">
                                <div class="method-name">edgeR</div>
                                <div class="method-type">Quasi-likelihood</div>
                                <div class="method-desc">TMM normalization with empirical Bayes</div>
                            </div>
                            <div class="method-card">
                                <div class="method-name">metagenomeSeq</div>
                                <div class="method-type">Zero-inflated</div>
                                <div class="method-desc">Zero-inflated log-normal modeling</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="arrow">‚¨áÔ∏è</div>
                
                <!-- Step 4: Consensus Analysis -->
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <div class="step-title">ü§ù Consensus Integration</div>
                        <div class="step-description">
                            Voting-based consensus analysis combining results from multiple statistical methods for robust feature identification.
                        </div>
                        
                        <div class="consensus-flow">
                            <div class="consensus-box">Method 1<br>Results</div>
                            <div class="flow-arrow">+</div>
                            <div class="consensus-box">Method 2<br>Results</div>
                            <div class="flow-arrow">+</div>
                            <div class="consensus-box">Method N<br>Results</div>
                            <div class="flow-arrow">‚Üí</div>
                            <div class="consensus-box">Consensus<br>Features</div>
                        </div>
                        
                        <div class="substeps">
                            <div class="substep">
                                <div class="substep-title">üó≥Ô∏è Majority Voting</div>
                                <div class="substep-desc">Features significant in ‚â•50% of methods</div>
                            </div>
                            <div class="substep">
                                <div class="substep-title">üìä Agreement Metrics</div>
                                <div class="substep-desc">Quantify inter-method concordance</div>
                            </div>
                            <div class="substep">
                                <div class="substep-title">üéØ Confidence Scoring</div>
                                <div class="substep-desc">Weighted confidence based on method agreement</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="arrow">‚¨áÔ∏è</div>
                
                <!-- Step 5: Results & Visualization -->
                <div class="step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <div class="step-title">üìà Results & Visualization</div>
                        <div class="step-description">
                            Comprehensive reporting with interactive visualizations and publication-ready outputs.
                        </div>
                        
                        <div class="feature-grid">
                            <div class="feature-box">
                                <div class="feature-icon">üåã</div>
                                <strong>Volcano Plots</strong><br>
                                Effect size vs significance
                            </div>
                            <div class="feature-box">
                                <div class="feature-icon">üìä</div>
                                <strong>Interactive Dashboards</strong><br>
                                HTML reports with plotly
                            </div>
                            <div class="feature-box">
                                <div class="feature-icon">üìã</div>
                                <strong>Method Comparison</strong><br>
                                Performance metrics
                            </div>
                            <div class="feature-box">
                                <div class="feature-icon">üìà</div>
                                <strong>Data Profiling</strong><br>
                                Characteristics visualization
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Method Selection Criteria -->
            <div class="info-theory-section">
                <div class="info-theory-title">üéØ Information Criteria for Method Selection</div>
                
                <div class="substeps" style="color: white;">
                    <div class="substep" style="background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.3);">
                        <div class="substep-title" style="color: white;">üìä Data Sparsity</div>
                        <div class="substep-desc" style="color: rgba(255,255,255,0.8);">
                            ‚Ä¢ <strong>&lt;30%</strong>: DESeq2, edgeR preferred<br>
                            ‚Ä¢ <strong>30-70%</strong>: ALDEx2, Wilcoxon robust<br>
                            ‚Ä¢ <strong>&gt;70%</strong>: metagenomeSeq, Wilcoxon
                        </div>
                    </div>
                    <div class="substep" style="background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.3);">
                        <div class="substep-title" style="color: white;">üß¨ Data Type</div>
                        <div class="substep-desc" style="color: rgba(255,255,255,0.8);">
                            ‚Ä¢ <strong>ASV/16S</strong>: ALDEx2, ANCOM-BC<br>
                            ‚Ä¢ <strong>Gene/Functional</strong>: DESeq2, edgeR<br>
                            ‚Ä¢ <strong>Viral</strong>: Wilcoxon, metagenomeSeq
                        </div>
                    </div>
                    <div class="substep" style="background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.3);">
                        <div class="substep-title" style="color: white;">üìà Sample Size</div>
                        <div class="substep-desc" style="color: rgba(255,255,255,0.8);">
                            ‚Ä¢ <strong>&lt;20</strong>: Wilcoxon recommended<br>
                            ‚Ä¢ <strong>20-50</strong>: All methods viable<br>
                            ‚Ä¢ <strong>&gt;50</strong>: Parametric methods optimal
                        </div>
                    </div>
                    <div class="substep" style="background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.3);">
                        <div class="substep-title" style="color: white;">‚öñÔ∏è Effect Size</div>
                        <div class="substep-desc" style="color: rgba(255,255,255,0.8);">
                            ‚Ä¢ <strong>Small</strong>: Conservative methods<br>
                            ‚Ä¢ <strong>Medium</strong>: Balanced approaches<br>
                            ‚Ä¢ <strong>Large</strong>: Sensitive methods
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Integration Architecture -->
            <div class="legend">
                <div class="legend-title">üèóÔ∏è Integration Architecture</div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px;">
                    <div>
                        <h4 style="color: #3498db; margin-bottom: 15px;">üêç Python Methods</h4>
                        <ul style="color: #555; line-height: 1.8;">
                            <li><strong>Wilcoxon:</strong> Pure Python implementation</li>
                            <li><strong>Information Theory:</strong> Entropy-based analysis</li>
                            <li><strong>Data Profiling:</strong> Comprehensive characterization</li>
                            <li><strong>Visualization:</strong> Plotly interactive plots</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: #e74c3c; margin-bottom: 15px;">üìä R Integration (rpy2)</h4>
                        <ul style="color: #555; line-height: 1.8;">
                            <li><strong>ALDEx2:</strong> Compositional analysis</li>
                            <li><strong>ANCOM-BC:</strong> Bias correction</li>
                            <li><strong>DESeq2:</strong> Negative binomial models</li>
                            <li><strong>edgeR:</strong> Quasi-likelihood estimation</li>
                            <li><strong>metagenomeSeq:</strong> Zero-inflation modeling</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Success Metrics -->
            <div class="stats-box">
                <h2 style="margin: 0 0 20px 0;">üéâ Current Performance Metrics</h2>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number">2/6</div>
                        <div class="stat-label">Methods Functional</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">100%</div>
                        <div class="stat-label">Recall Achieved</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">1.000</div>
                        <div class="stat-label">Best F1 Score</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">0.030s</div>
                        <div class="stat-label">Fastest Runtime</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>